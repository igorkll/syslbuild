{
    "builditems": [
        // ----------------- kernel panic
        {
            "type": "debian",
            "name": "panic_handler_base",
            "export": false,

            "include": [
                "bash"
            ],

            "variant": "essential",
            "suite": "bookworm",
            "url": "http://snapshot.debian.org/archive/debian/20250809T133719Z"
        },
        {
            "type": "directory",
            "name": "panic_handler",
            "export": false,

            "items": [
                ["panic_handler_base", "."],
                ["files/panic_handler.sh", "/init", [0, 0, "0700"]]
            ]
        },
        {
            "type": "initramfs",
            "name": "panic_handler.img",
            "export": false,

            "source": "panic_handler"
        },

        // ----------------- system & rootfs
        {
            "type": "debian",
            "name": "debian directory",
            "export": false,

            "kernel": "default",
            "include": [
                "initramfs-tools",
                "plymouth",
                "plymouth-themes",
                "nodejs",
                "npm",
                "dbus",
                "systemd",
                "systemd-sysv",
                "kexec-tools",

                // libraries
                "libnspr4",
                "libgtk-3-0",
                "libxext6",
                "libnss3",
                "libasound2",
                "libatk1.0-0",
                "libcups2",
                "libglib2.0-0",
                "libdrm2",
                "libdrm-dev",
                "libgbm1",
                "libgbm-dev",

                // video drivers

                // mesa
                "mesa-utils",
                "mesa-vulkan-drivers",
                "libegl1-mesa",
                "libgles2-mesa",
                "libgl1-mesa-dri",

                // wayland
                "libwayland-client0",
                "libwayland-server0",
                "libwayland-cursor0",
                "libwayland-egl1",
                "iio-sensor-proxy", // auto rotation
                "xwayland",

                // x11
                "xserver-xorg-core",
                "xserver-xorg-video-fbdev",
                "xserver-xorg-video-vesa",
                "xserver-xorg-video-qxl",
                "xserver-xorg-video-intel",
                "xserver-xorg-video-nouveau",
                "libx11-6",
                "libxcomposite1",
                "libxdamage1",
                "libxfixes3",
                "libxrandr2",
                "libxtst6",
                "libxss1",

                // compositor
                "kwin-wayland",
                "kwin-common",
                "kwin-addons",
                "libkwineffects14",
                "libkwinglutils14",

                // input
                "libinput10",
                "libudev1",
                "libmtdev1" //touchscreens
            ],

            "variant": "minbase",
            "suite": "bookworm",
            "url": "http://snapshot.debian.org/archive/debian/20250809T133719Z",

            "hook-directory": "hooks"
        },
        {
            "type": "from-directory",
            "name": "kernel.img",
            "export": false,

            "source": "debian directory",
            "path": "/vmlinuz"
        },
        {
            "type": "from-directory",
            "name": "initrd.img",
            "export": false,

            "source": "debian directory",
            "path": "/initrd.img"
        },
        {
            "type": "directory",
            "name": "rootfs directory",
            "export": false,

            "directories": [
                ["/sky", [0, 0, "1755"]],
                ["/sky/system", [0, 0, "1700"]],
                ["/realroot", [0, 0, "0700"]]
            ],

            "items": [
                ["debian directory", "."],
                ["files/loop_mountroot", "/etc/initramfs-tools/scripts/local-premount/loop_mountroot", [0, 0, "0700"]],
                ["files/skystart.sh", "/sky/system/skystart.sh", [0, 0, "0755"]],
                ["files/logo.png", "/sky/system/logo.png", [0, 0, "0755"]],
                ["files/ElectronApplication", "/sky/system/ElectronApplication"]
            ],

            "delete": [
                "/vmlinuz",
                "/initrd.img"
            ]
        },
        {
            "type": "filesystem",
            "name": "rootfs.img",
            "export": false,

            "source": "rootfs directory",

            "fs_type": "ext4",
            "size": "auto + (256 * 1024 * 1024)",
            "label": "skyOS rootfs"
        },

        // ----------------- filesystem
        {
            "type": "directory",
            "name": "image directory",
            "export": false,

            "items": [
                ["kernel.img", "/kernel.img"],
                ["initrd.img", "/initrd.img"],
                ["rootfs.img", "/rootfs.img"]
            ]
        },
        {
            "type": "directory",
            "name": "data directory",
            "export": false,

            "directories": [
                ["/data", [0, 0, "1700"]],
                ["/data/userdata", [0, 0, "1700"]]
            ],

            "items": [
                ["image directory", "/system/A"],
                ["image directory", "/system/B"]
            ]
        },
        {
            "type": "filesystem",
            "name": "data.img",
            "export": false,

            "source": "data directory",

            "fs_type": "ext4",
            "size": "auto + (1024 * 1024 * 1024)",
            "label": "skyOS"
        },
        
        // ----------------- boot images
        {
            "type": "filesystem",
            "name": "bios boot.img",
            "export": false,

            "size": "1M"
        },
        {
            "type": "filesystem",
            "name": "efi boot.img",
            "export": false,

            "fs_arg": "-F32",
            "fs_type": "fat",
            "size": "64M",
            "label": "EFI"
        },
        {
            "type": "full-disk-image",
            "name": "skyOS.img",
            "export": true,

            "size": "auto + (1 * 1024 * 1024)",

            "partitionTable": "dos",
            "partitions": [
                ["data.img", "linux"]
            ],

            "bootloader": {
                "type": "grub",
                "config": "grub.cfg",
                "boot": 0,
                "modules": [
                    "normal",
                    "part_msdos",
                    "part_gpt",
                    "ext2",
                    "configfile"
                ]
            }
        }
    ]
}