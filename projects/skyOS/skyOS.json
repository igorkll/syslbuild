{
    "builditems": [
        // ----------------- kernel panic
        {
            "type": "gcc-build",
            "name": "kernel_panic",
            "export": false,

            "CFLAGS": [
                "-O2",
                "-ffreestanding",
                "-Wall",
                "-Wextra",
                "-nostdlib"
            ],
            "LDFLAGS": [
                "-static"
            ],

            "sources-dirs": ["sources/kernel_panic"],
            "sources-dirs-extensions": [".c", ".cpp"],
            "sources-dirs-recursive": true
        },

        // ----------------- rootfs
        {
            "type": "debian",
            "name": "debian directory",
            "export": false,

            "kernel": "default",
            "include": [
                "initramfs-tools",
                "plymouth",
                "plymouth-themes",
                "nodejs",
                "npm",
                "dbus",
                "systemd",
                "systemd-sysv",

                // libraries
                "libnspr4",
                "libgtk-3-0",
                "libxext6",
                "libnss3",
                "libasound2",
                "libatk1.0-0",
                "libcups2",
                "libglib2.0-0",
                "libdrm2",
                "libdrm-dev",
                "libgbm1",
                "libgbm-dev",

                // video drivers

                // mesa
                "mesa-utils",
                "mesa-vulkan-drivers",
                "libegl1-mesa",
                "libgles2-mesa",
                "libgl1-mesa-dri",

                // wayland
                "libwayland-client0",
                "libwayland-server0",
                "libwayland-cursor0",
                "libwayland-egl1",
                "iio-sensor-proxy", // auto rotation
                "xwayland",

                // x11
                "xserver-xorg-core",
                "xserver-xorg-video-fbdev",
                "xserver-xorg-video-vesa",
                "xserver-xorg-video-qxl",
                "xserver-xorg-video-intel",
                "xserver-xorg-video-nouveau",
                "libx11-6",
                "libxcomposite1",
                "libxdamage1",
                "libxfixes3",
                "libxrandr2",
                "libxtst6",
                "libxss1",

                // compositor
                "kwin-wayland",
                "kwin-common",
                "kwin-addons",
                "libkwineffects14",
                "libkwinglutils14",

                // input
                "libinput10",
                "libudev1",
                "libmtdev1" //touchscreens
            ],

            "variant": "minbase",
            "suite": "bookworm",
            "url": "http://snapshot.debian.org/archive/debian/20250809T133719Z",

            "hook-directory": "hooks"
        },
        {
            "type": "directory",
            "name": "rootfs directory",
            "export": false,

            "directories": [
                ["/sky", [0, 0, "1755"]],
                ["/sky/system", [0, 0, "1700"]]
            ],

            "items": [
                ["debian directory", "."],
                ["files/skystart.sh", "/sky/system/skystart.sh", [0, 0, "0755"]],
                ["files/logo.png", "/sky/system/logo.png", [0, 0, "0755"]],
                ["files/ElectronApplication", "/sky/system/ElectronApplication"]
            ]
        },

        // ----------------- filesystem
        {
            "type": "filesystem",
            "name": "rootfs.img",
            "export": false,

            "source": "rootfs directory",

            "fs_type": "ext4",
            "size": "auto + (100 * 1024 * 1024)",
            "label": "skyOS"
        },
        
        // ----------------- boot images
        {
            "type": "filesystem",
            "name": "bios boot.img",
            "export": false,

            "size": "1M"
        },
        {
            "type": "filesystem",
            "name": "efi boot.img",
            "export": false,

            "fs_arg": "-F32",
            "fs_type": "fat",
            "size": "64M",
            "label": "EFI"
        },
        {
            "type": "full-disk-image",
            "name": "skyOS.img",
            "export": true,

            "size": "auto + (1 * 1024 * 1024)",

            "partitionTable": "dos",
            "partitions": [
                ["rootfs.img", "linux"]
            ],

            "bootloader": {
                "type": "grub",
                "config": "grub.cfg",
                "boot": 0,
                "modules": [
                    "normal",
                    "part_msdos",
                    "part_gpt",
                    "ext2",
                    "configfile"
                ]
            }
        }
    ]
}